# Event Impact Model â€” Report

Autogenerated from the current pipeline artifacts.

## Method (brief)

- Events: SEC EDGAR submissions, timestamped via `acceptanceDateTime` (UTC) and converted to US/Eastern.

- Alignment: events are bucketed (premarket/intraday/afterhours) and mapped to an effective NYSE trade date.

- Event study: market model vs SPY; estimation window [-120, -21], event window [-10, +5]; label uses CAR[+1,+5].

- Modeling: walk-forward CV with purge/embargo-style guardrails; outputs are out-of-sample predictions.

- Backtest: long top-q / short bottom-q; explicit costs (bps on turnover); optional portfolio vol targeting.


## Key artifacts

- `reports/event_study_summary.csv`

- `reports/event_study_robustness.csv`

- `data/processed/cv_metrics.csv`, `data/processed/cv_metrics_lgbm.csv`

- `reports/backtest_engine_summary.csv`, `reports/backtest_engine_summary_vt10.csv`

- `reports/robustness_sanity.csv`, `reports/robustness_subsamples.csv`, `reports/robustness_within_day_shuffle.csv`


## Reproduce (local)

Install:

```bash
python -m pip install -U pip
python -m pip install -e ".[dev]"
```

Run (end-to-end, requires network):

```bash
python scripts/01_fetch_universe_sec.py
python scripts/02_fetch_prices.py
python scripts/03_fetch_events.py
python scripts/04_event_study_mvp.py
python scripts/05_event_study_robustness.py
python scripts/06_build_model_dataset.py
python scripts/07b_train_cv_lgbm.py
python scripts/09_backtest_costed.py
python scripts/10_backtest_engine.py
python scripts/11_build_report.py
```

Offline smoke (fixtures only):

```bash
pytest -q tests/test_smoke_e2e.py
python scripts/11_build_report.py
```


## Figures

### CAAR

![](figures/caar.png)

### Equity Curve (Engine)

![](figures/equity_engine.png)

### Equity Curve (Engine, vol target 10%)

![](figures/equity_engine_vt10.png)

## Cross-Validation Summary

| model      |          mse |          r2 |     pearson |     spearman |   hit_rate |   accuracy |
|:-----------|-------------:|------------:|------------:|-------------:|-----------:|-----------:|
| lgbm       |   0.0102863  |  -0.185591  |   0.0438149 |   0.0410997  |   0.513462 | nan        |
| logit_sign | nan          | nan         | nan         | nan          | nan        |   0.501188 |
| ridge      |   0.00919079 |  -0.0297087 |   0.0145033 |  -0.00854999 |   0.493395 | nan        |

## Backtest Summary

| variant           |   sharpe_gross |   sharpe_net |   maxdd_gross |   maxdd_net |   avg_gross_exposure |    avg_lev |   mean_turnover |     mean_cost |   cost_share_of_gross_abs |   avg_active |   avg_long |   avg_short |   n_pairs |    mean_net |   hit_rate |
|:------------------|---------------:|-------------:|--------------:|------------:|---------------------:|-----------:|----------------:|--------------:|--------------------------:|-------------:|-----------:|------------:|----------:|------------:|-----------:|
| engine            |      0.0202901 |   -0.0379733 |     -0.575437 |   -0.618109 |             0.560628 |   1        |        0.324505 |   6.49011e-05 |                0.0075644  |      1.88954 |    0.89298 |    0.996564 |       nan | nan         | nan        |
| engine_vt10       |      0.134991  |    0.0670142 |     -0.249984 |   -0.260938 |             0.560628 |   0.555912 |        0.324505 |   2.58904e-05 |                0.00834151 |      1.88954 |    0.89298 |    0.996564 |       nan | nan         | nan        |
| costed_eventlevel |      1.97448   |    1.92662   |    nan        |  nan        |           nan        | nan        |      nan        | nan           |              nan          |    nan       |  nan       |  nan        |       371 |   0.0161044 |   0.563342 |

## Robustness (Sanity Checks)

| variant               |   days |   sharpe_gross |   sharpe_net |   maxdd_gross |   maxdd_net |   mean_turnover |   mean_cost |   avg_active |   avg_long |   avg_short |
|:----------------------|-------:|---------------:|-------------:|--------------:|------------:|----------------:|------------:|-------------:|-----------:|------------:|
| base_oos_pred         |   2037 |      0.0202901 |   -0.0379733 |     -0.575437 |   -0.618109 |        0.324505 | 6.49011e-05 |      1.88954 |   0.89298  |    0.996564 |
| random_predictions    |   2037 |      0.0113823 |   -0.0442892 |     -0.474929 |   -0.500547 |        0.326407 | 6.52815e-05 |      1.85763 |   0.851252 |    1.00638  |
| shuffled_labels_proxy |   2037 |     -0.443755  |   -0.49962   |     -0.864872 |   -0.874687 |        0.328892 | 6.57784e-05 |      1.86598 |   0.850761 |    1.01522  |

## Robustness (Subsamples)

| group   | split   |   days |   sharpe_gross |   sharpe_net |   maxdd_gross |   maxdd_net |   mean_turnover |   mean_cost |   avg_active |   avg_long |   avg_short |
|:--------|:--------|-------:|---------------:|-------------:|--------------:|------------:|----------------:|------------:|-------------:|-----------:|------------:|
| ALL     | ALL     |   2037 |      0.0202901 |   -0.0379733 |     -0.575437 |   -0.618109 |       0.324505  | 6.49011e-05 |     1.88954  |   0.89298  |    0.996564 |
| year    | 2020    |   2037 |      0.586912  |    0.564569  |     -0.181608 |   -0.184331 |       0.0536503 | 1.07301e-05 |     0.320569 |   0.148257 |    0.172312 |
| year    | 2021    |   2037 |     -0.319418  |   -0.351655  |     -0.261605 |   -0.276983 |       0.0581855 | 1.16371e-05 |     0.325479 |   0.152676 |    0.172803 |
| year    | 2022    |   2037 |     -0.372146  |   -0.399038  |     -0.479547 |   -0.483611 |       0.0531259 | 1.06252e-05 |     0.301915 |   0.138439 |    0.163476 |
| year    | 2023    |   2037 |      0.204335  |    0.18364   |     -0.246995 |   -0.251061 |       0.0508591 | 1.01718e-05 |     0.292096 |   0.141384 |    0.150712 |
| year    | 2024    |   2037 |     -0.0432658 |   -0.0699747 |     -0.222956 |   -0.227196 |       0.0525902 | 1.0518e-05  |     0.320569 |   0.158076 |    0.162494 |
| year    | 2025    |   2037 |     -0.156027  |   -0.175109  |     -0.412549 |   -0.414951 |       0.0531489 | 1.06298e-05 |     0.314188 |   0.146784 |    0.167403 |

## Robustness (Within-day Shuffle)

| variant            |   days |   sharpe_gross |   sharpe_net |   maxdd_gross |   maxdd_net |   mean_turnover |   mean_cost |   avg_active |   avg_long |   avg_short |
|:-------------------|-------:|---------------:|-------------:|--------------:|------------:|----------------:|------------:|-------------:|-----------:|------------:|
| base_oos_pred      |   2037 |      0.0202901 |  -0.0379733  |     -0.575437 |   -0.618109 |        0.324505 | 6.49011e-05 |      1.88954 |   0.89298  |    0.996564 |
| within_day_shuffle |   2037 |      0.0641174 |   0.00739529 |     -0.735437 |   -0.753296 |        0.325682 | 6.51365e-05 |      1.87138 |   0.853706 |    1.01767  |

## Notes

- Sensitivity grids are used for robustness checks, not for parameter optimization.
